# x1 ‚Äî profanity (–º–∞—Ç)
# x2 ‚Äî link (—Å—Å—ã–ª–∫–∞)
# x3 ‚Äî long_text (–¥–ª–∏–Ω–Ω—ã–π)
# x4 ‚Äî new_user (–Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)

# üì¶ –î–∞–Ω–Ω—ã–µ (–∏—Å—Ç–æ—Ä–∏—è —Ä–µ—à–µ–Ω–∏–π –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞)
data = [
    ([1, 1, 0, 1], 0),  # –º–∞—Ç + —Å—Å—ã–ª–∫–∞ + –Ω–æ–≤—ã–π ‚Üí –º–æ–¥–µ—Ä–∞—Ü–∏—è
    ([0, 1, 0, 1], 0),  # —Å—Å—ã–ª–∫–∞ + –Ω–æ–≤—ã–π ‚Üí –º–æ–¥–µ—Ä–∞—Ü–∏—è
    ([0, 0, 1, 0], 1),  # –¥–ª–∏–Ω–Ω—ã–π, —á–∏—Å—Ç—ã–π ‚Üí –æ–∫
    ([0, 0, 0, 0], 1),  # –ø—Ä–æ—Å—Ç–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π ‚Üí –æ–∫
    ([1, 0, 1, 0], 0),  # –º–∞—Ç ‚Üí –º–æ–¥–µ—Ä–∞—Ü–∏—è
]

# === INIT ===
weights = [0.0, 0.0, 0.0, 0.0]  # –≤–µ—Å–∞ –¥–ª—è 4 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
bias = 0.0
lr = 0.1
epochs = 5


def predict(x, weights, bias):
    total = sum(w * xi for w, xi in zip(weights, x)) + bias
    return 1 if total >= 0 else 0


# === TRAINING ===
for epoch in range(1, epochs + 1):
    print(f"\n================ EPOCH {epoch} ================")
    total_errors = 0

    for i, (x, y_true) in enumerate(data, 1):
        print(f"\nSample {i}")
        print(f"x = {x}, y_true = {y_true}")

        # Prediction
        raw_sum = sum(w * xi for w, xi in zip(weights, x)) # without bias
        y_pred = predict(x, weights, bias)

        print(f"weighted sum = {raw_sum:.2f} + bias {bias:.2f} = {raw_sum + bias:.2f}")
        print(f"y_pred = {y_pred}")

        # Error
        error = y_true - y_pred
        print(f"error = {y_true} - {y_pred} = {error}")

        if error != 0:
            total_errors += 1
            print("‚Üí Updating weights and bias")

            for j in range(len(weights)):
                old_w = weights[j]
                weights[j] += lr * error * x[j]
                if x[j] != 0:
                    print(
                        f"  w{j+1}: {old_w:.2f} ‚Üí {weights[j]:.2f} "
                        f"(because x{j+1}=1)"
                    )

            old_bias = bias
            bias += lr * error
            print(f"  bias: {old_bias:.2f} ‚Üí {bias:.2f}")
        else:
            print("‚Üí Correct prediction, no update")

    print(f"\nEpoch {epoch} finished")
    print(f"Total errors this epoch: {total_errors}")
    print(f"Weights now: {weights}")
    print(f"Bias now: {bias}")



# üìâ –ß—Ç–æ —Ç—ã —É–≤–∏–¥–∏—à—å –≤ –ª–æ–≥–∞—Ö

# –í –ø–µ—Ä–≤—ã—Ö —ç–ø–æ—Ö–∞—Ö:
# –º–Ω–æ–≥–æ –æ—à–∏–±–æ–∫
# –≤–µ—Å–∞ –∞–∫—Ç–∏–≤–Ω–æ –ø—Ä—ã–≥–∞—é—Ç

# –ü–æ—Ç–æ–º:
# –æ—à–∏–±–∫–∏ —É–º–µ–Ω—å—à–∞—é—Ç—Å—è
# –≤–µ—Å–∞ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É—é—Ç—Å—è

# –í –∫–æ–Ω—Ü–µ:
# –º–æ–∂–µ—Ç –±—ã—Ç—å 0 –æ—à–∏–±–æ–∫ –Ω–∞ —ç–ø–æ—Ö—É
# üëâ —ç—Ç–æ –∏ –µ—Å—Ç—å —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å

# –û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å.
# –í–æ—Ç –∑–¥–µ—Å—å –ø–µ—Ä—Ü–µ–ø—Ç—Ä–æ–Ω –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –±—ã—Ç—å –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–µ–π –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –≥–æ–≤–æ—Ä–∏—Ç—å —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–º —è–∑—ã–∫–æ–º.

# –£ —Ç–µ–±—è –µ—Å—Ç—å:

# Weights: [-0.2, -0.1, 0.1, -0.1]


# –ù–∞–ø–æ–º–Ω—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ:

# w1 ‚Üí profanity (–º–∞—Ç)
# w2 ‚Üí link (—Å—Å—ã–ª–∫–∞)
# w3 ‚Üí long_text (–¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç)
# w4 ‚Üí new_user (–Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)

# üß† –ö–∞–∫ —ç—Ç–æ —á–∏—Ç–∞—Ç—å –ü–†–ê–í–ò–õ–¨–ù–û

# –ü–µ—Ä—Ü–µ–ø—Ç—Ä–æ–Ω –≥–æ–≤–æ—Ä–∏—Ç –Ω–µ ¬´–¥–∞ / –Ω–µ—Ç¬ª, –∞:
# –∫–∞–∂–¥—ã–π –ø—Ä–∏–∑–Ω–∞–∫ —Ç–æ–ª–∫–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –≤ —Å–≤–æ—é —Å—Ç–æ—Ä–æ–Ω—É
# üî¥ w1 = -0.2 ‚Üí profanity
# üëâ —Å–∞–º—ã–π —Å–∏–ª—å–Ω—ã–π –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–π –≤–µ—Å
# –ß–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥:

# ¬´–ï—Å–ª–∏ –µ—Å—Ç—å –º–∞—Ç ‚Äî –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∑–∫–æ —Ä–∞—Å—Ç—ë—Ç¬ª

# –≠—Ç–æ:
# –ª–æ–≥–∏—á–Ω–æ
# —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–∞–Ω–Ω—ã–º
# –º–æ–¥–µ–ª—å —Å—á–∏—Ç–∞–µ—Ç —ç—Ç–æ –≥–ª–∞–≤–Ω—ã–º —Å–∏–≥–Ω–∞–ª–æ–º
# üî¥ w2 = -0.1 ‚Üí link
# üëâ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–π, –Ω–æ —Å–ª–∞–±–µ–µ

# –ü–µ—Ä–µ–≤–æ–¥:
# ¬´–°—Å—ã–ª–∫–∞ ‚Äî –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ, –Ω–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –∫—Ä–∏—Ç–∏—á–Ω–æ¬ª
# –¢.–µ.:
# —Å—Å—ã–ª–∫–∞ —Å–∞–º–∞ –ø–æ —Å–µ–±–µ ‚â† –±–∞–Ω
# –Ω–æ –≤ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Ñ–∞–∫—Ç–æ—Ä–∞–º–∏ ‚Äî –¥–∞
# üü¢ w3 = +0.1 ‚Üí long_text
# üëâ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π –≤–µ—Å

# –ü–µ—Ä–µ–≤–æ–¥:
# ¬´–î–ª–∏–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —á–∞—â–µ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ¬ª
# –≠—Ç–æ –æ—á–µ–Ω—å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ:
# –±–æ—Ç—ã –∏ —Å–ø–∞–º —á–∞—Å—Ç–æ –∫–æ—Ä–æ—Ç–∫–∏–µ
# –ª—é–¥–∏ –ø–∏—à—É—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ
# üî¥ w4 = -0.1 ‚Üí new_user


# –ü–µ—Ä–µ–≤–æ–¥:
# ¬´–ù–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –º—ã –¥–æ–≤–µ—Ä—è–µ–º –º–µ–Ω—å—à–µ¬ª
# –≠—Ç–æ –º—è–≥–∫–∏–π —à—Ç—Ä–∞—Ñ, –Ω–µ –∑–∞–ø—Ä–µ—Ç.
# ‚öñÔ∏è –ß—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –¥–µ–ª–∞–µ—Ç –º–æ–¥–µ–ª—å
# –ú–æ–¥–µ–ª—å —Å—á–∏—Ç–∞–µ—Ç:

# score =
# -0.2 * profanity
# -0.1 * link
# +0.1 * long_text
# -0.1 * new_user
# + bias


# –ò –¥–∞–ª—å—à–µ:
# score >= 0 ‚Üí –ø—É–±–ª–∏–∫—É–µ–º
# score < 0 ‚Üí –º–æ–¥–µ—Ä–∞—Ü–∏—è

# –í–æ —á—Ç–æ —ç—Ç–æ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è
# –≠—Ç–æ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —á–∏—Å—Ç—É—é —Ñ—É–Ω–∫—Ü–∏—é:
# def moderate(x):
#     score = (
#         -0.2 * x[0] +
#         -0.1 * x[1] +
#          0.1 * x[2] +
#         -0.1 * x[3] +
#          b
#     )
#     return 1 if score >= 0 else 0


# –¢—ã –º–æ–∂–µ—à—å —É–¥–∞–ª–∏—Ç—å –≤–µ—Å—å –∫–æ–¥ –æ–±—É—á–µ–Ω–∏—è ‚Äî –æ–Ω –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω.
